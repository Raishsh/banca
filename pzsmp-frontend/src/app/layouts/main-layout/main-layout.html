<app-helper-panel></app-helper-panel>

<div class="menu-overlay" [class.aberto]="isMenuAberto" (click)="fecharMenu()"></div>

<div class="main-container">
  
  <aside class="sidebar" [class.aberto]="isMenuAberto">

    <div class="sidebar-header">
      <img src="assets/images/icone2.png" alt="Logo" class="logo-icon" />
      <div class="header-title">
        <h3>Sampaiollo</h3>
        <span>SISTEMA</span>
      </div>
      <button class="btn-fechar-menu" (click)="fecharMenu()">
        <i class="fas fa-times"></i>
      </button>
    </div>

    <nav class="sidebar-nav">
      
      <div class="nav-group" *ngFor="let grupo of menuGrupos">
        
        <div class="group-header" 
             (click)="toggleGrupo(grupo.id)" 
             [class.active]="grupoExpandido === grupo.id">
          <span class="group-title">{{ grupo.titulo }}</span>
          <i class="fas fa-chevron-right arrow-icon" [class.rotate]="grupoExpandido === grupo.id"></i>
        </div>

        <div class="group-items" *ngIf="grupoExpandido === grupo.id">
          <ng-container *ngFor="let item of grupo.itens">
            <a 
              *ngIf="podeVerItem(item)"
              [routerLink]="item.link" 
              routerLinkActive="active"
              (click)="fecharMenu()">
              <i [class]="item.icon"></i>
              {{ item.label }}
            </a>
          </ng-container>
        </div>

      </div>

    </nav>

    <div class="sidebar-bottom">
      <div class="sidebar-actions">
        <button class="btn-fechar-caixa" (click)="fecharCaixa()">
          Fechar Caixa
        </button>
      </div>
    </div>
  </aside>

  <main class="content-area">
    <header class="content-header">
      <button class="menu-toggle" (click)="toggleMenu()">
        <i class="fas fa-bars"></i>
      </button>

      <div class="header-datetime">
        <span class="date">{{ dataAtual | date:'fullDate' }}</span>
        <span class="time">{{ dataAtual | date:'HH:mm:ss' }}</span>
      </div>

      <div class="user-profile">
        <div class="user-info">
          <i class="fas fa-user-circle"></i> 
          <span>{{ nomeUsuarioLogado || 'Usu√°rio' }}</span> 
        </div>
        <a (click)="logout()" class="btn-logout" title="Sair">
          <i class="fas fa-sign-out-alt"></i>
        </a>
      </div>
    </header>
    <router-outlet></router-outlet>
  </main>
</div>